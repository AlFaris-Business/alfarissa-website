function highlightActiveNavigation(){const e=window.location.pathname.split("/").pop()||"index.html";document.querySelectorAll(".nav-menu a").forEach(t=>{const n=t.getAttribute("href");n===e||"index.html"===e&&"index.html"===n||""===e&&"index.html"===n?t.classList.add("nav-active"):t.classList.remove("nav-active")})}function initializeMobileNavigation(){const e=document.querySelector(".nav-mobile-toggle"),t=document.querySelector(".nav-menu");e&&t&&(e.addEventListener("click",function(){t.classList.toggle("nav-menu-open");const n=e.querySelector("i");n.classList.contains("fa-bars")?(n.classList.remove("fa-bars"),n.classList.add("fa-times")):(n.classList.remove("fa-times"),n.classList.add("fa-bars"))}),document.addEventListener("click",function(n){if(!e.contains(n.target)&&!t.contains(n.target)){t.classList.remove("nav-menu-open");const n=e.querySelector("i");n.classList.remove("fa-times"),n.classList.add("fa-bars")}}),t.querySelectorAll("a").forEach(n=>{n.addEventListener("click",function(){t.classList.remove("nav-menu-open");const n=e.querySelector("i");n.classList.remove("fa-times"),n.classList.add("fa-bars")})}))}function initializeFormHandlers(){document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",function(t){t.preventDefault();const n=new FormData(e),i=n.get("fullName")||n.get("name"),o=n.get("phoneNumber")||n.get("phone"),s=n.get("description")||n.get("message"),a=n.get("serviceType")||"";let c="مرحباً، أود التواصل معكم:\n\n";i&&(c+=`الاسم: ${i}\n`),o&&(c+=`رقم الجوال: ${o}\n`),a&&(c+=`نوع الخدمة: ${a}\n`),s&&(c+=`التفاصيل: ${s}\n`);const l=`https://wa.me/966555490800?text=${encodeURIComponent(c)}`;window.open(l,"_blank"),e.reset(),showNotification("تم إرسال طلبك بنجاح! سيتم تحويلك إلى واتساب.","success")})})}function showNotification(e,t="info"){const n=document.createElement("div");n.style.cssText=`\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background-color: ${"success"===t?"#10b981":"#3b82f6"};\n        color: white;\n        padding: 16px 24px;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        z-index: 1001;\n        font-family: 'Noto Kufi Arabic', sans-serif;\n        max-width: 300px;\n        word-wrap: break-word;\n        animation: slideIn 0.3s ease-out;\n    `,n.textContent=e;const i=document.createElement("style");i.textContent="\n        @keyframes slideIn {\n            from { transform: translateX(100%); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n        }\n        @keyframes slideOut {\n            from { transform: translateX(0); opacity: 1; }\n            to { transform: translateX(100%); opacity: 0; }\n        }\n    ",document.head.querySelector("style[data-notifications]")||(i.setAttribute("data-notifications","true"),document.head.appendChild(i)),document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideOut 0.3s ease-out",setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},300)},3e3)}function selectServiceAndContact(e){localStorage.setItem("selectedServiceType",e),window.location.href="index.html#contact"}function initializeSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})}),window.location.hash&&setTimeout(()=>{const e=document.querySelector(window.location.hash);e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100),registerServiceWorker()}function registerServiceWorker(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker registered successfully:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&confirm("موقع محدث متاح. هل تريد إعادة تحميل الصفحة؟")&&(t.postMessage({type:"SKIP_WAITING"}),window.location.reload())})})}).catch(e=>{console.log("Service Worker registration failed:",e)})})}"undefined"!=typeof tailwind&&(tailwind.config={theme:{extend:{fontFamily:{notoKufi:["Noto Kufi Arabic","sans-serif"],"arabic-text":["Noto Kufi Arabic","sans-serif"]}}}}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("serviceType"),t=localStorage.getItem("selectedServiceType");if(t&&e){let n=!1;for(let i=0;i<e.options.length;i++)if(e.options[i].value===t){e.value=t,n=!0;break}n||(t.startsWith("قضايا_احوال_شخصية")?e.value="قضايا_احوال_شخصية":t.includes("قضايا_المحاكم_العامة")||t.includes("قضايا_عقارية")||t.includes("مطالبات_مدنية")||t.includes("تصحي_اوضاع")||t.includes("قضايا_ملكية_فكرية")?e.value="قضايا_المحاكم_العامة":t.startsWith("قضايا_المحاكم_التجارية")||t.includes("منازعات_الشركات")||t.includes("عقود_مطالبات_تجارية")||t.includes("منافسة_ممارسات_تجارية")||t.includes("تحكيم_تجاري")?e.value="قضايا_المحاكم_التجارية":t.startsWith("قضايا_المحاكم_العمالية")||t.includes("حقوق_العمال")||t.includes("تمثيل_اصحاب_العمل")||t.includes("استشارات_عمالية")?e.value="قضايا_المحاكم_العمالية":t.includes("تأسيس_الشركات")||t.includes("تعديل_الشركات")||t.includes("مستثمرين_اجانب")?e.value="تأسيس_شركات_واستثمار":t.includes("وزارة_العدل_ناجز")||t.includes("وزارة_التجارة")||t.includes("البلديات")||t.includes("موارد_بشرية_تنمية_اجتماعية")?e.value="تعقيب_معاملات_حكومية":t.includes("تراخيص_انشطة_تجارية")||t.includes("تراخيص_دفاع_مدني_صحة")||t.includes("تراخيص_بيئية_سياحية_زراعية")?e.value="استخراج_وتجديد_التراخيص":t.includes("منصة_قوى")||t.includes("منصة_ab_jsher")||t.includes("منصة_بلدي")||t.includes("منصات_حكومية_اخرى")?e.value="خدمات_التعقيب_الإلكتروني":t.includes("الضمان_الاجتماعي")||t.includes("حساب_المواطن")||t.includes("بنك_التنمية_الاجتماعية")||t.includes("دعم_ريف_للاسر_المنتجة")||t.includes("رخص_العمل_الحر")?e.value="خدمات_Ddm_Ajtm_Wal_Amal_Hr":e.value=""),localStorage.removeItem("selectedServiceType")}highlightActiveNavigation(),initializeMobileNavigation(),initializeFormHandlers(),initializeSmoothScrolling()});